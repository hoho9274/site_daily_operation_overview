import { 
  Schedule, 
  Task, 
  TaskStatus, 
  Milestone, 
  MilestoneStatus,
  Deviation,
  DeviationType,
  ResourceType,
  RiskCategory 
} from '../types/schedule.types';

export const mockTasks: Task[] = [
  {
    id: 'task-1',
    scheduleId: 'schedule-1',
    name: 'Site Preparation',
    description: 'Clear and prepare construction site',
    startDate: new Date('2024-01-01'),
    endDate: new Date('2024-01-15'),
    duration: 14,
    dependencies: [],
    resources: [
      { id: 'res-1', name: 'Excavator', type: ResourceType.EQUIPMENT, availability: 100, cost: 5000 },
      { id: 'res-2', name: 'Site Crew A', type: ResourceType.LABOR, availability: 100, cost: 10000 }
    ],
    progress: 100,
    status: TaskStatus.COMPLETED,
    criticalPath: true,
  },
  {
    id: 'task-2',
    scheduleId: 'schedule-1',
    name: 'Foundation Work',
    description: 'Excavate and pour foundation',
    startDate: new Date('2024-01-16'),
    endDate: new Date('2024-02-15'),
    duration: 30,
    dependencies: ['task-1'],
    resources: [
      { id: 'res-3', name: 'Concrete Crew', type: ResourceType.LABOR, availability: 100, cost: 25000 },
      { id: 'res-4', name: 'Concrete', type: ResourceType.MATERIAL, availability: 100, cost: 50000 }
    ],
    progress: 85,
    status: TaskStatus.IN_PROGRESS,
    criticalPath: true,
  },
  {
    id: 'task-3',
    scheduleId: 'schedule-1',
    name: 'Structural Steel Erection',
    description: 'Install structural steel framework',
    startDate: new Date('2024-02-01'),
    endDate: new Date('2024-03-15'),
    duration: 43,
    dependencies: ['task-2'],
    resources: [
      { id: 'res-5', name: 'Steel Crew', type: ResourceType.SUBCONTRACTOR, availability: 100, cost: 75000 },
      { id: 'res-6', name: 'Crane', type: ResourceType.EQUIPMENT, availability: 80, cost: 15000 }
    ],
    progress: 60,
    status: TaskStatus.IN_PROGRESS,
    criticalPath: true,
  },
  {
    id: 'task-4',
    scheduleId: 'schedule-1',
    name: 'Roofing',
    description: 'Install roof structure and covering',
    startDate: new Date('2024-03-01'),
    endDate: new Date('2024-03-31'),
    duration: 30,
    dependencies: ['task-3'],
    resources: [
      { id: 'res-7', name: 'Roofing Crew', type: ResourceType.SUBCONTRACTOR, availability: 100, cost: 45000 }
    ],
    progress: 30,
    status: TaskStatus.IN_PROGRESS,
    criticalPath: false,
  },
  {
    id: 'task-5',
    scheduleId: 'schedule-1',
    name: 'MEP Rough-In',
    description: 'Install mechanical, electrical, and plumbing systems',
    startDate: new Date('2024-03-16'),
    endDate: new Date('2024-04-30'),
    duration: 45,
    dependencies: ['task-3'],
    resources: [
      { id: 'res-8', name: 'MEP Contractor', type: ResourceType.SUBCONTRACTOR, availability: 90, cost: 120000 }
    ],
    progress: 25,
    status: TaskStatus.DELAYED,
    criticalPath: false,
  },
  {
    id: 'task-6',
    scheduleId: 'schedule-1',
    name: 'Interior Finishing',
    description: 'Complete interior walls, flooring, and finishes',
    startDate: new Date('2024-05-01'),
    endDate: new Date('2024-06-15'),
    duration: 45,
    dependencies: ['task-4', 'task-5'],
    resources: [
      { id: 'res-9', name: 'Finishing Crew', type: ResourceType.LABOR, availability: 100, cost: 80000 }
    ],
    progress: 0,
    status: TaskStatus.NOT_STARTED,
    criticalPath: false,
  },
];

const mockMilestones: Milestone[] = [
  {
    id: 'milestone-1',
    name: 'Foundation Complete',
    date: new Date('2024-02-15'),
    description: 'Foundation work completed and approved',
    status: MilestoneStatus.AT_RISK,
    dependencies: ['task-2'],
  },
  {
    id: 'milestone-2',
    name: 'Structure Topped Out',
    date: new Date('2024-03-31'),
    description: 'Structural steel and roofing complete',
    status: MilestoneStatus.PENDING,
    dependencies: ['task-3', 'task-4'],
  },
  {
    id: 'milestone-3',
    name: 'Substantial Completion',
    date: new Date('2024-06-15'),
    description: 'Project substantially complete',
    status: MilestoneStatus.PENDING,
    dependencies: ['task-6'],
  },
];

export const mockSchedules: Schedule[] = [
  {
    id: 'schedule-1',
    projectId: 'project-1',
    name: 'Main Building Construction Schedule',
    description: 'Construction schedule for the main office building',
    startDate: new Date('2024-01-01'),
    endDate: new Date('2024-06-30'),
    tasks: mockTasks,
    milestones: mockMilestones,
    baseline: {
      id: 'baseline-1',
      name: 'Original Baseline',
      createdDate: new Date('2023-12-01'),
      tasks: mockTasks.map(t => ({
        taskId: t.id,
        plannedStartDate: t.startDate,
        plannedEndDate: t.endDate,
        plannedDuration: t.duration,
        plannedCost: t.resources.reduce((sum, r) => sum + r.cost, 0),
      })),
      totalDuration: 180,
      totalCost: 520000,
    },
    actualProgress: mockTasks.map(t => ({
      date: new Date(),
      taskId: t.id,
      percentComplete: t.progress,
      actualCost: t.resources.reduce((sum, r) => sum + r.cost, 0) * (t.progress / 100),
      earnedValue: t.resources.reduce((sum, r) => sum + r.cost, 0) * (t.progress / 100),
      plannedValue: t.resources.reduce((sum, r) => sum + r.cost, 0) * 0.8,
    })),
    health: {
      overall: 78.5,
      schedule: {
        spi: 0.92,
        sv: -12000,
        scheduleHealth: 75,
        criticalPathStatus: 'AT_RISK',
        delayedTasks: 1,
        completedTasks: 1,
        totalTasks: 6,
        forecastCompletionDate: new Date('2024-07-15'),
      },
      cost: {
        cpi: 0.98,
        cv: -5000,
        eac: 530000,
        etc: 150000,
        budgetHealth: 82,
        actualCost: 380000,
        plannedCost: 375000,
      },
      resource: {
        utilizationRate: 85,
        availableResources: 15,
        allocatedResources: 12,
        overallocatedResources: 1,
        resourceHealth: 80,
      },
      risks: [
        {
          id: 'risk-1',
          name: 'Weather Delays',
          description: 'Potential weather delays during roofing work',
          probability: 'MEDIUM',
          impact: 'HIGH',
          category: RiskCategory.SCHEDULE,
          mitigationPlan: 'Monitor weather forecasts and adjust schedule',
        },
        {
          id: 'risk-2',
          name: 'Material Shortage',
          description: 'Potential steel supply chain issues',
          probability: 'LOW',
          impact: 'HIGH',
          category: RiskCategory.COST,
          mitigationPlan: 'Secure alternative suppliers',
        },
      ],
      recommendations: [],
      lastCalculated: new Date(),
    },
    metadata: {
      projectName: 'Downtown Office Complex',
      projectManager: 'John Smith',
      lastModifiedBy: 'Jane Doe',
      version: '2.1',
      tags: ['commercial', 'high-priority', 'downtown'],
    },
    createdAt: new Date('2023-12-01'),
    updatedAt: new Date(),
  },
  {
    id: 'schedule-2',
    projectId: 'project-1',
    name: 'Site Infrastructure Schedule',
    description: 'Schedule for site utilities and infrastructure',
    startDate: new Date('2024-01-01'),
    endDate: new Date('2024-03-31'),
    tasks: [],
    milestones: [],
    baseline: {
      id: 'baseline-2',
      name: 'Infrastructure Baseline',
      createdDate: new Date('2023-12-01'),
      tasks: [],
      totalDuration: 90,
      totalCost: 150000,
    },
    actualProgress: [],
    health: {
      overall: 85,
      schedule: {
        spi: 1.02,
        sv: 2000,
        scheduleHealth: 88,
        criticalPathStatus: 'ON_TRACK',
        delayedTasks: 0,
        completedTasks: 3,
        totalTasks: 8,
        forecastCompletionDate: new Date('2024-03-28'),
      },
      cost: {
        cpi: 1.05,
        cv: 5000,
        eac: 145000,
        etc: 50000,
        budgetHealth: 90,
        actualCost: 95000,
        plannedCost: 90000,
      },
      resource: {
        utilizationRate: 78,
        availableResources: 8,
        allocatedResources: 6,
        overallocatedResources: 0,
        resourceHealth: 85,
      },
      risks: [],
      recommendations: [],
      lastCalculated: new Date(),
    },
    metadata: {
      projectName: 'Downtown Office Complex',
      projectManager: 'John Smith',
      lastModifiedBy: 'Mike Johnson',
      version: '1.3',
      tags: ['infrastructure', 'utilities'],
    },
    createdAt: new Date('2023-12-01'),
    updatedAt: new Date(),
  },
];

export const mockDeviations: Deviation[] = [
  {
    id: 'dev-1',
    scheduleId: 'schedule-1',
    taskId: 'task-5',
    type: DeviationType.SCHEDULE_DELAY,
    severity: 'HIGH',
    description: 'MEP Rough-In delayed due to material shortage',
    detectedAt: new Date('2024-03-20'),
    daysDelayed: 7,
    costImpact: 15000,
    resolved: false,
  },
  {
    id: 'dev-2',
    scheduleId: 'schedule-1',
    taskId: 'task-2',
    type: DeviationType.COST_OVERRUN,
    severity: 'MEDIUM',
    description: 'Foundation work costs exceeded budget due to soil conditions',
    detectedAt: new Date('2024-02-01'),
    costImpact: 8000,
    resolved: true,
    resolution: 'Additional budget approved by project sponsor',
  },
  {
    id: 'dev-3',
    scheduleId: 'schedule-1',
    taskId: 'task-3',
    type: DeviationType.RESOURCE_CONFLICT,
    severity: 'LOW',
    description: 'Crane availability conflict with another project',
    detectedAt: new Date('2024-02-25'),
    daysDelayed: 2,
    resolved: false,
  },
];
