import { 
  ScheduleHealth, 
  CriticalPathAnalysis, 
  DelayPrediction,
  Recommendation,
  RecommendationType,
  RiskCategory
} from '../types/schedule.types';
import { mockTasks } from './scheduleMockData';

export const mockHealth: ScheduleHealth = {
  overall: 78.5,
  schedule: {
    spi: 0.92,
    sv: -12000,
    scheduleHealth: 75,
    criticalPathStatus: 'AT_RISK',
    delayedTasks: 1,
    completedTasks: 1,
    totalTasks: 6,
    forecastCompletionDate: new Date('2024-07-15'),
  },
  cost: {
    cpi: 0.98,
    cv: -5000,
    eac: 530000,
    etc: 150000,
    budgetHealth: 82,
    actualCost: 380000,
    plannedCost: 375000,
  },
  resource: {
    utilizationRate: 85,
    availableResources: 15,
    allocatedResources: 12,
    overallocatedResources: 1,
    resourceHealth: 80,
  },
  risks: [
    {
      id: 'risk-1',
      name: 'Weather Delays',
      description: 'Potential weather delays during roofing work',
      probability: 'MEDIUM',
      impact: 'HIGH',
      category: RiskCategory.SCHEDULE,
      mitigationPlan: 'Monitor weather forecasts and adjust schedule accordingly',
      owner: 'Project Manager',
      dueDate: new Date('2024-03-01'),
    },
    {
      id: 'risk-2',
      name: 'Material Shortage',
      description: 'Potential steel supply chain issues',
      probability: 'LOW',
      impact: 'HIGH',
      category: RiskCategory.COST,
      mitigationPlan: 'Secure alternative suppliers and maintain buffer stock',
      owner: 'Procurement Manager',
      dueDate: new Date('2024-02-15'),
    },
    {
      id: 'risk-3',
      name: 'Skilled Labor Shortage',
      description: 'Difficulty finding qualified MEP contractors',
      probability: 'MEDIUM',
      impact: 'MEDIUM',
      category: RiskCategory.RESOURCE,
      mitigationPlan: 'Partner with trade schools and expand contractor network',
      owner: 'HR Manager',
    },
  ],
  recommendations: [
    {
      id: 'rec-1',
      type: RecommendationType.ADD_RESOURCES,
      priority: 'HIGH',
      title: 'Add MEP Resources',
      description: 'Add additional MEP contractors to recover schedule delay',
      impact: 'Reduce MEP installation time by 5 days',
      effort: 'MEDIUM',
      taskIds: ['task-5'],
    },
    {
      id: 'rec-2',
      type: RecommendationType.FAST_TRACK,
      priority: 'MEDIUM',
      title: 'Fast-track Interior Work',
      description: 'Start interior finishing in completed sections while MEP continues',
      impact: 'Save 10 days on overall schedule',
      effort: 'HIGH',
      taskIds: ['task-5', 'task-6'],
    },
  ],
  lastCalculated: new Date(),
};

export const mockCriticalPath: CriticalPathAnalysis = {
  path: ['task-1', 'task-2', 'task-3', 'task-5', 'task-6'],
  totalDuration: 179,
  criticalTasks: mockTasks.filter(t => ['task-1', 'task-2', 'task-3'].includes(t.id)),
  float: {
    'task-1': 0,
    'task-2': 0,
    'task-3': 0,
    'task-4': 15,
    'task-5': 0,
    'task-6': 0,
  },
  bottlenecks: ['task-3', 'task-5'],
};

export const mockPredictions: DelayPrediction[] = [
  {
    taskId: 'task-5',
    taskName: 'MEP Rough-In',
    probability: 0.75,
    expectedDelay: 7,
    impact: 'HIGH',
    causes: [
      'Material delivery delays',
      'Resource conflicts',
      'Complex coordination requirements',
    ],
    preventiveMeasures: [
      'Expedite material orders',
      'Increase crew size',
      'Implement daily coordination meetings',
    ],
  },
  {
    taskId: 'task-4',
    taskName: 'Roofing',
    probability: 0.45,
    expectedDelay: 3,
    impact: 'MEDIUM',
    causes: [
      'Weather conditions',
      'Material availability',
    ],
    preventiveMeasures: [
      'Monitor weather forecasts',
      'Secure backup suppliers',
      'Consider weather-resistant installation methods',
    ],
  },
  {
    taskId: 'task-6',
    taskName: 'Interior Finishing',
    probability: 0.30,
    expectedDelay: 5,
    impact: 'MEDIUM',
    causes: [
      'Dependency on MEP completion',
      'Quality issues requiring rework',
    ],
    preventiveMeasures: [
      'Phase interior work by zones',
      'Implement quality checkpoints',
      'Cross-train crews for flexibility',
    ],
  },
];

export const mockRecommendations: Recommendation[] = [
  {
    id: 'rec-1',
    type: RecommendationType.ADD_RESOURCES,
    priority: 'HIGH',
    title: 'Increase MEP Crew Size',
    description: 'Add 5 additional MEP technicians to the current crew to accelerate installation',
    impact: 'Reduce MEP installation duration by 7 days, bringing schedule back on track',
    effort: 'MEDIUM',
    taskIds: ['task-5'],
  },
  {
    id: 'rec-2',
    type: RecommendationType.FAST_TRACK,
    priority: 'HIGH',
    title: 'Implement Fast-Track Strategy',
    description: 'Begin interior finishing in Zone A while MEP continues in Zone B and C',
    impact: 'Save 10 days on overall schedule by overlapping activities',
    effort: 'HIGH',
    taskIds: ['task-5', 'task-6'],
  },
  {
    id: 'rec-3',
    type: RecommendationType.RESEQUENCE_TASKS,
    priority: 'MEDIUM',
    title: 'Resequence Non-Critical Activities',
    description: 'Move non-critical roofing activities to run parallel with MEP work',
    impact: 'Optimize resource utilization and reduce idle time',
    effort: 'LOW',
    taskIds: ['task-4', 'task-5'],
  },
  {
    id: 'rec-4',
    type: RecommendationType.RISK_MITIGATION,
    priority: 'MEDIUM',
    title: 'Implement Weather Contingency Plan',
    description: 'Establish covered work areas and alternative indoor tasks for weather delays',
    impact: 'Minimize weather-related delays by up to 5 days',
    effort: 'MEDIUM',
    taskIds: ['task-4'],
  },
  {
    id: 'rec-5',
    type: RecommendationType.COST_OPTIMIZATION,
    priority: 'LOW',
    title: 'Negotiate Bulk Material Discounts',
    description: 'Combine material orders across tasks to achieve volume discounts',
    impact: 'Reduce material costs by 8-10% ($15,000-20,000)',
    effort: 'LOW',
    taskIds: ['task-5', 'task-6'],
  },
];
